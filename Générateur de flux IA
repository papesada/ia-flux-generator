Python

import streamlit as st
import os
from openai import OpenAI
from fpdf import FPDF

# Configuration de la page
st.set_page_config(page_title="IA FLUX - GÃ©nÃ©rateur", page_icon="ğŸš€")

# Initialisation OpenAI (la clÃ© sera configurÃ©e dans Streamlit Cloud plus tard)
client = OpenAI(api_key=st.secrets["OPENAI_API_KEY"])

# Fonction PDF
def creation_pdf(texte, langue):
    pdf = FPDF()
    pdf.add_page()
    pdf.set_font("Arial", 'B', 16)
    pdf.set_text_color(30, 58, 138)
    pdf.cell(0, 10, "IA FLUX - Rapport de Contenu", ln=True, align='C')
    pdf.ln(10)
    pdf.set_font("Arial", size=12)
    pdf.set_text_color(0, 0, 0)
    texte_propre = texte.encode('latin-1', 'ignore').decode('latin-1')
    pdf.multi_cell(0, 10, texte_propre)
    return pdf.output(dest='S').encode('latin-1')

# --- INTERFACE ---
st.title("IA FLUX ğŸš€")
st.write("GÃ©nÃ©rez du contenu captivant pour vos rÃ©seaux sociaux")

sujet = st.text_area("De quoi voulez-vous parler ?", placeholder="Entrez votre idÃ©e...")

col1, col2, col3, col4 = st.columns(4)
if 'ton' not in st.session_state: st.session_state.ton = "Professionnel"

with col1:
    if st.button("ğŸ’¼\nPro"): st.session_state.ton = "Professionnel"
with col2:
    if st.button("ğŸ“š\nPÃ©da"): st.session_state.ton = "PÃ©dagogique"
with col3:
    if st.button("ğŸ˜„\nHumour"): st.session_state.ton = "Humoristique"
with col4:
    if st.button("âš™ï¸\nTech"): st.session_state.ton = "Technique"

langue = st.selectbox("ğŸŒ Langue", ["FranÃ§ais", "Anglais", "Espagnol", "Allemand"])

if st.button("GÃ©nÃ©rer le contenu", type="primary", use_container_width=True):
    if sujet:
        with st.spinner('IA FLUX travaille...'):
            prompt = f"RÃ©dige un post pour IA FLUX en {langue}. Sujet: {sujet}. Style: {st.session_state.ton}."
            response = client.chat.completions.create(model="gpt-4o", messages=[{"role": "user", "content": prompt}])
            st.session_state.resultat = response.choices[0].message.content
            st.session_state.langue_gen = langue

if 'resultat' in st.session_state:
    st.markdown("---")
    st.write(st.session_state.resultat)
    pdf_bytes = creation_pdf(st.session_state.resultat, st.session_state.langue_gen)
    st.download_button("ğŸ“¥ TÃ©lÃ©charger en PDF", data=pdf_bytes, file_name="IA_FLUX_Post.pdf", mime="application/pdf")

st.caption("Â© 2026 IA FLUX")
